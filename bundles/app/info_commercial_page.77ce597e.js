"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[5179],{30157:(e,t,o)=>{var i=o(4002),a=o.n(i),r=o(44856),s=o(72163),n=o(5504),l=o(46914),k=o(58117);class m{constructor(e){var t,o,i;if(i=2e3,(o="bookmarkScrollSpeed")in(t=this)?Object.defineProperty(t,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[o]=i,this.$wrapper=e,this.maxBookmarkLevel=2,this.activeBookmarksScrolling=!0,this.scrollingTimer=null,this.setUpBookmarkLevelButtons(),this.setupSnippets(),setTimeout((()=>this.setupSnippets()),2e3),(0,l.Z)(this.setupSnippets.bind(this)),editmode)this.markLastBookmarkItem(),this.$wrapper.on("click",".link-move-top, .link-move-bottom",this.moveLink.bind(this)).on("click",".bookmark-to-top, .bookmark-to-bottom",this.moveBookmark.bind(this)).on("click",".add-bookmark-btn",this.addNewBookmarkWysiwyg.bind(this)).on("click",".add-link-btn",this.addNewLinkEditable.bind(this));else{this.initBookmarksScrolling(),(0,r.Z)(this.$wrapper.find("h2")),this.$wrapper.on("click",".bookmark-item a",this.handleClickBookmarkItem.bind(this));let e=window.location.hash.substring(1),t=this.$wrapper.find(`.bookmark-item a[href="#${e}"]`);e&&t.length&&this.goToBookmarkItem(t)}}setupSnippets(){let e=this.$wrapper.find(".sidebar-content"),t=e.find(".sidebar-content-inner");if(e.find(".schedule-snippet").length){let o=e.find(".schedule-snippet").first();o.length&&"none"!==a()(".sidebar-snippet").css("display")&&t.height()>e.height()&&(o.addClass("schedule-snippet-short"),o.find(".no-bg").removeClass("no-bg"))}else if(e.find(".universal-snippet-wrapper").length){let o=e.find(".universal-snippet-wrapper").first();o.length&&"none"!==a()(".sidebar-snippet").css("display")&&t.height()>e.height()&&o.addClass("universal-snippet-short")}}addNewBookmarkWysiwyg(){let e=this.$wrapper.find(".bookmark-item:not(.d-none):last");(e.length?e.next(".bookmark-item.d-none"):this.$wrapper.find(".bookmark-item.d-none:first")).removeClass("d-none"),this.markLastBookmarkItem()}markLastBookmarkItem(){let e=this.$wrapper.find(".bookmark-item:not(.d-none)");e.last().length&&(this.$wrapper.find(".bookmark-item").removeClass("last-bookmark"),e.last().addClass("last-bookmark")),1===e.length?e.addClass("no-border-bookmark"):e.removeClass("no-border-bookmark")}addNewLinkEditable(){let e=this.$wrapper.find(".link-item:not(.d-none):last");(e.length?e.next(".link-item.d-none"):this.$wrapper.find(".link-item.d-none:first")).removeClass("d-none")}setUpBookmarkLevelButtons(){this.$wrapper.find(".bookmark-item").each(((e,t)=>{let o=a()(t);this.updateBookmarkLevelState(o),o.find(".bookmark-to-left, .bookmark-to-right").on("click",(e=>{let t=a()(e.currentTarget),i=o.data("config");t.hasClass("bookmark-to-left")&&i.level>0&&(i.level-=1),t.hasClass("bookmark-to-right")&&i.level<this.maxBookmarkLevel&&(i.level+=1),this.setBookmarkConfig(o,i),this.updateBookmarkLevelState(o)}))}))}updateBookmarkLevelState(e){e.data("config")||this.setBookmarkConfig(e,{level:0});let t=e.data("config"),o=e.find(".bookmark-to-left"),i=e.find(".bookmark-to-right"),a=e.find(".bookmark-point-wrapper");o.show(),i.show(),a.show(),0===t.level&&o.hide(),t.level>0&&a.hide(),t.level===this.maxBookmarkLevel&&i.hide(),e.find(".bookmark-item-offset").removeClass("level-0 level-1 level-2").addClass("level-"+t.level)}setBookmarkConfig(e,t){e.data("config",t),editmode&&e.find(".bookmark-item-config").text(JSON.stringify(t))}moveLink(e){let t=a()(e.currentTarget),o=t.closest(".link-item");if(o.hasClass("d-none"))return;let i=o.prev(".link-item:not(.d-none)"),r=o.next(".link-item:not(.d-none)");if(t.hasClass("link-move-top")&&i.length)i.before(o);else{if(!t.hasClass("link-move-bottom")||!r.length)return;r.after(o)}let s=this.$wrapper.find(".link-items .link-item:not(.d-none)").map(((e,t)=>a()(t).data("item"))).get();this.$wrapper.find(".links-order-editable").text(s.join(","))}moveBookmark(e){let t=a()(e.currentTarget),o=t.closest(".bookmark-item");if(o.hasClass("d-none"))return;let i=o.prev(".bookmark-item:not(.d-none)"),r=o.next(".bookmark-item:not(.d-none)");if(t.hasClass("bookmark-to-top")&&i.length)i.before(o);else{if(!t.hasClass("bookmark-to-bottom")||!r.length)return;r.after(o)}let s=this.$wrapper.find(".bookmark-items .bookmark-item:not(.d-none)").map(((e,t)=>a()(t).data("item"))).get();this.$wrapper.find(".bookmarks-order-editable").text(s.join(","))}initBookmarksScrolling(){let e=this.$wrapper.find('.bookmark-item a[href^="#"]').filter(((e,t)=>"#"!==a()(t).attr("href").trim())),t=[];e.each(((e,o)=>{let i=a()(o),r=i.attr("href").substring(1);r=a()("<textarea/>").html(r).val();let s=this.$wrapper.find(`.icp-content span[name="${r}"]`);s.length&&t.push({bookmark:i,targetLink:s})})),(0,k.Z)((()=>{if(!this.activeBookmarksScrolling)return;let o=a()(".header").outerHeight(),i=a()(window).scrollTop()+o+150,r=null,s=null;for(let e of t){let t=e.targetLink.offset().top,o=i-t;t<=i&&(null===s||o<s)&&(r=e.bookmark,s=o)}r?(e.filter(((e,t)=>a()(t).attr("href")!==r.attr("href"))).removeClass("active current"),r.addClass("active current"),r.closest(".bookmark-item").prevAll().find("a").addClass("active")):e.removeClass("active current")}))}handleClickBookmarkItem(e){let t=a()(e.currentTarget);this.goToBookmarkItem(t),(0,s.L9)(t.closest("[data-track-source]").data("track-source"),"TOC link",t.text(),"Click")}goToBookmarkItem(e){this.disableBookmarksScrolling();let t=e.attr("href").replace("#",""),o=e.closest(".bookmark-item"),i=a()(`[name='${t}']`);o.closest(".bookmark-items").find(".bookmark-item a").removeClass("active current"),o.find("a").addClass("active current"),o.prevAll().find("a").addClass("active"),(0,n.Z)(i,this.bookmarkScrollSpeed,(()=>this.activeBookmarksScrolling=!0))}disableBookmarksScrolling(){clearTimeout(this.scrollingTimer),this.activeBookmarksScrolling=!1,this.scrollingTimer=setTimeout((()=>{this.activeBookmarksScrolling=!0}),this.bookmarkScrollSpeed)}}a()(document).ready((()=>{new m(a()(".icp"))}))}},e=>{e.O(0,[3913,3279,3493,6914,2163,913,5504,9405,4856,8117],(()=>{return t=30157,e(e.s=t);var t}));e.O()}]);