"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[5461],{15461:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var n=s(31955),i=s(64291),a=s.n(i);function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class o{static addListener(e){o._listeners.push(e)}constructor(){r(this,"UPDATES_INTERVAL_MS",500),r(this,"UPDATES_START_TIMEOUT_MS",300),editmode||this.constructor._initialized||(this.initViewedPagesTrack(),this.initTimeTracks(),this.initIntervalTracks())}initViewedPagesTrack(){let e=+n.Z.get("user_behavior_viewed_pages_count")||0,t=n.Z.get("user_behavior_last_viewed_url")||"",s=window.location.pathname;n.Z.set("user_behavior_last_viewed_url",s),s!==t&&(e++,n.Z.set("user_behavior_viewed_pages_count",e))}initTimeTracks(){a().initialize({currentPageName:"user-behavior",idleTimeoutInSeconds:15}),a().callWhenUserLeaves((()=>{const e=+n.Z.get("user_behavior_sess_engagement_time")||0,t=this.getPageEngagementSeconds(),s=t-o._flushedPageEngagementTime;n.Z.set("user_behavior_sess_engagement_time",e+s),o._flushedPageEngagementTime=t}))}initIntervalTracks(){const e=()=>{this.updateScrollValues(),0!==o._listeners.length&&(this.updateTimeValues(),this.updateViewedPagesValues(),this.triggerChange())};setTimeout((()=>{e(),setInterval(e,this.UPDATES_INTERVAL_MS)}),this.UPDATES_START_TIMEOUT_MS)}updateScrollValues(){o.currentScrollPercent=this.getScrollPercent(),o.maxScrollPercent=Math.max(o.currentScrollPercent,o.maxScrollPercent),o.sessionMaxScrollPercent=+n.Z.get("user_behavior_sess_max_scroll_percent")||0,o.maxScrollPercent>o.sessionMaxScrollPercent&&(n.Z.set("user_behavior_sess_max_scroll_percent",o.maxScrollPercent),o.sessionMaxScrollPercent=o.maxScrollPercent)}updateTimeValues(){o.pageTimeSeconds=this.getSecondsOnPage(),o.sessionTimeSeconds=this.getSessionSeconds(),o.pageEngagementTimeSeconds=this.getPageEngagementSeconds();const e=(+n.Z.get("user_behavior_sess_engagement_time")||0)+o.pageEngagementTimeSeconds-o._flushedPageEngagementTime;o.sessionEngagementTimeSeconds=+e.toFixed(3)}updateViewedPagesValues(){o.pagesViewedCount=+n.Z.get("user_behavior_viewed_pages_count")||0}triggerChange(){o._listeners.forEach(((e,t,s)=>{e()&&s.splice(t,1)}))}getScrollPercent(){let e=document.documentElement,t=document.body,s="scrollTop",n="scrollHeight";return+((e[s]||t[s])/((e[n]||t[n])-e.clientHeight)*100).toFixed(1)}getSecondsOnPage(){let e=startDate.getTime();return+(((new Date).getTime()-e)/1e3).toFixed(3)}getSessionSeconds(){let e=+n.Z.get("user_behavior_sess_start_time")||0,t=(new Date).getTime();return e||(e=startDate.getTime(),n.Z.set("user_behavior_sess_start_time",e)),+((t-e)/1e3).toFixed(3)}getPageEngagementSeconds(){return+a().getTimeOnPageInSeconds("user-behavior").toFixed(3)}}r(o,"_initialized",!1),r(o,"_listeners",[]),r(o,"_flushedPageEngagementTime",0),r(o,"currentScrollPercent",0),r(o,"maxScrollPercent",0),r(o,"sessionMaxScrollPercent",0),r(o,"pageTimeSeconds",0),r(o,"sessionTimeSeconds",0),r(o,"pageEngagementTimeSeconds",0),r(o,"sessionEngagementTimeSeconds",0),r(o,"pagesViewedCount",0)}}]);