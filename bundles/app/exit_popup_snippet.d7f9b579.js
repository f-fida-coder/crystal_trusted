"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[9438],{23626:(t,e,i)=>{var s=i(4002),r=i.n(s),p=i(36011),a=i(31955),o=i(72163),n=i(35495),u=i(7004),d=i(15461);function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}r()(document).ready((()=>{r()(".exit-popup").each(((t,e)=>new l(r()(e))))}));class l{constructor(t){h(this,"TYPE_EXIT_POPUP","exit_popup"),h(this,"TYPE_PAGE_POPUP","page_popup"),h(this,"PAGE_POPUP_PAGE_TYPES",["Service Description","Info-Commercial Page","Product Description"]),this.$wrapper=t,this.popupType=this.$wrapper.data("type"),this.$form=this.$wrapper.find(".ep-form"),this.$result=this.$wrapper.find(".ep-result"),this.$submitBtn=this.$wrapper.find(".ep-form-submit-btn"),this.formValidation=new n.Z(this.$form),this.trackSource=this.$form.closest("[data-track-source]").data("track-source"),editmode&&this.initPopupImg(),this.$wrapper.removeClass("d-none"),this.initShowPopupHandler(),this.$wrapper.on("click",this.handleClickOutsideOfPopup.bind(this)),this.$wrapper.find(".ep-close-btn, .ep-result-button").on("click",this.closePopup.bind(this)),this.$submitBtn.on("click",this.handleClickSubmitBtn.bind(this)),this.$form.on("load-gdpr",this.handleLoadGdpr.bind(this))}async initShowPopupHandler(){editmode||isMobile()||a.Z.get("disableExitPopup")||a.Z.get("submittedForm")||(this.popupType===this.TYPE_EXIT_POPUP&&setTimeout((()=>{this.handleMouseoutEventFunc=this.handleMouseoutEvent.bind(this),document.addEventListener("mouseout",this.handleMouseoutEventFunc)}),5e3),this.popupType===this.TYPE_PAGE_POPUP&&this.PAGE_POPUP_PAGE_TYPES.includes(pageType)&&d.default.addListener((()=>{if(d.default.pageEngagementTimeSeconds>=5&&d.default.maxScrollPercent>=90){if(a.Z.get("disableExitPopup"))return!0;if(a.Z.set("disableExitPopup",!0,1),!a.Z.get("submittedForm"))return this.showPopup(),!0}})))}handleMouseoutEvent(t){t.toElement||t.relatedTarget||t.clientY>=10||p.Z.getTabsCount()>1||(document.removeEventListener("mouseout",this.handleMouseoutEventFunc),a.Z.get("disableExitPopup")||(a.Z.set("disableExitPopup",!0,1),a.Z.get("submittedForm")||this.showPopup()))}handleClickSubmitBtn(t){t.preventDefault(),(0,o.$I)(this.$submitBtn,"Click"),this.formValidation.validate()&&(this.$submitBtn.addClass("disabled"),(0,u.Z)(this.$form,{success:()=>{this.$form.addClass("d-none"),this.$result.removeClass("d-none"),this.popupType===this.TYPE_EXIT_POPUP&&(0,o.L9)("Site","form for ","Conversion","Submitted",!0)},error:t=>{this.$submitBtn.removeClass("disabled"),this.formValidation.placeServerErrors(t)}}))}handleClickOutsideOfPopup(t){t.target===t.currentTarget&&(this.closePopup(),(0,o.L9)(this.$wrapper.data("track-source"),"outside","Popup","Click"))}async showPopup(){this.$wrapper.addClass("active");let t=await this.initPopupImg();t&&t[0].svgatorPlayer.ready((t=>t.play())),this.popupType===this.TYPE_EXIT_POPUP&&(0,o.L9)(this.$wrapper.data("track-source"),"popup","Exit Popup","Displayed"),this.popupType===this.TYPE_PAGE_POPUP&&(0,o.L9)(this.$wrapper.data("track-source"),"popup","Page Popup","Displayed")}async initPopupImg(){let t=this.$wrapper.find(".ep-img-wrapper"),e=t.data("img"),i=t.find("svg");if(!e)return null;if(i.length)return i;let s=await fetch(e),r=await s.text();return t.html(r),t.find("svg")}closePopup(){this.$wrapper.removeClass("active")}handleLoadGdpr(){editmode||(this.$wrapper.addClass("form-with-gdpr"),this.$form.find(".form-textarea-wrapper textarea").attr("data-max-rows",3),this.$form.find(".form-textarea-wrapper textarea").attr("rows",3))}}}},t=>{t.O(0,[3913,1955,6669,4291,2163,2898,7004,5495,5461,6011],(()=>{return e=23626,t(t.s=e);var e}));t.O()}]);