"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[5495],{35495:(e,t,r)=>{r.d(t,{Z:()=>n});var a=r(4002),s=r.n(a),l=r(72163);class n{constructor(e){this.$form=e,this.$form.hasClass("form-validation-listener-added")||this.$form.on("change cut paste keyup","input, textarea",this.handleChangeInput.bind(this)).addClass("form-validation-listener-added")}handleChangeInput(e){13!==e.which&&this.resetErrors(s()(e.currentTarget))}validate(){return this.resetErrors(),this.validateTextarea(),this.validateTextInput(),this.validateEmailInput(),this.validatePhoneInput(),this.validateCheckboxes(),this.validateUploadInputs(),this.validateCalendarDate(),0===this.$form.find(".has-error").length}resetErrors(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){let t=e.closest(".form-element-wrapper");t.hasClass("no-reset")||t.removeClass("has-error"),t.find(".has-error:not(.no-reset)").removeClass("has-error"),t.find(".form-element-error:not(.no-reset)").remove();let r=t.closest(".coupled-form-elements");r.length&&!r.find(".has-error:not(.no-reset)").length&&r.find(".form-element-error.coupled-error:not(.no-reset)").remove()}else this.$form.find(".has-error:not(.no-reset)").removeClass("has-error"),this.$form.find(".form-element-error:not(.no-reset)").remove()}addError(e,t){let r=e.closest(".form-element-wrapper"),a=["radio","checkbox"].includes(e.attr("type"));if(r.addClass("has-error"),!a){let e=s()(`<span class="form-element-error">${t}</span>`);r.append(e)}let n=r.closest(".coupled-form-elements");if(n.length&&!n.find(".coupled-error").length){let e=s()(`\n                <span class="form-element-error coupled-error">\n                    <i class="icon-s-info inline-block text-16 rotate-180"></i> \n                    ${translations["Please check these fields"]}\n                </span>\n            `);n.find(".form-element-wrapper:last").after(e)}(0,l.$I)(e,"Validation error: "+t)}addFileError(e,t,r){let a=e.closest(".form-element-wrapper"),n=a.find(`[data-file-name="${t.name}"][data-file-size="${t.size}"]`).closest(".form-upload-input-file");if(a.addClass("has-error"),n.length){let t=s()(`<span class="form-element-error no-reset">${r}</span>`);n.find(".form-element-error").remove(),n.addClass("has-error no-reset"),n.append(t),(0,l.$I)(e,"Validation error: "+r)}}placeErrors(e){this.resetErrors();for(let[t,r]of Object.entries(e)){let e=this.$form.find(`input[name="${t}"]`);e.length&&this.addError(e,r)}}placeServerErrors(e){e.responseJSON&&e.responseJSON.errors?this.placeErrors(e.responseJSON.errors):this.addFormError(translations["Something went wrong. Please, check fields and try again"],!0)}addFormError(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&this.resetErrors();let t=s()(`<span class="form-element-error">${e}</span>`);this.$form.append(t),(0,l.$I)(this.$form,"Validation error: "+e)}validateTextarea(){this.$form.find("textarea").each(((e,t)=>{let r=s()(t),a=(""+r.val()).trim(),l=null;if(r.attr("required")&&!a){let e=this.$form.find(".form-audio-input");e.length&&0!==e[0].files.length||(l=translations["Please complete this field"])}l&&this.addError(r,l)}))}validateTextInput(){this.$form.find('input[type="text"]').each(((e,t)=>{let r=s()(t),a=(""+r.val()).trim(),l=null;r.attr("required")&&!a&&(l=translations["Please complete this field"]),l&&this.addError(r,l)}))}validateEmailInput(){this.$form.find('input[type="email"]').each(((e,t)=>{let r=s()(t),a=(""+r.val()).trim(),l=null;if(r.attr("required")&&!a&&(l=translations["Please complete this field"]),l||!a||/^([a-zA-Z0-9_.+-])+@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)||(l=translations["Please, type correct email"]),!l&&a&&void 0!==r.attr("data-work-email")){let e=r.data("free-emails"),t=a.replace(/.*@/,"").toLowerCase();e.includes(t)&&(l=translations["Please, type work email"])}l&&this.addError(r,l)}))}validatePhoneInput(){this.$form.find('input[type="tel"]').each(((e,t)=>{let r=s()(t),a=r.attr("required"),l=(""+r.val()).trim(),n=null;a&&!l&&(n=translations["Please complete this field"]);const i=r[0].intlTelInput;!n&&a&&i&&!i.isValidNumber()&&(n=translations["Type your correct phone number"]),n&&this.addError(r,n)}))}validateCheckboxes(){this.$form.find('input[type="checkbox"]').each(((e,t)=>{let r=s()(t),a=r.attr("name"),l=this.$form.find(`input[name="${a}"]:checked`).length,n=null;r.attr("required")&&!l&&(n=translations["Please, select something"]),n&&this.addError(r,n)}))}validateUploadInputs(){this.$form.find('.form-upload-input-wrapper input[type="file"]').each(((e,t)=>{let r=s()(t),a=r[0].files,l=+r.data("max-files"),n=1024*r.data("max-size-mb")*1024,i=r.data("valid-extensions"),o=null,d=0;for(let e of a){d+=e.size;let t=e.name.replace(/^.*[\\/]/,""),a=e.name.split(".").pop().toLowerCase(),s=null;this.lengthInUtf8Bytes(t)>255&&(s=translations["File name is too long"]),s||i.includes(a)||(s=translations.rfp_form_invalid_file_extension),!s&&e.size>10485760&&(s=translations["File size is too big"]),s&&this.addFileError(r,e,s)}r.attr("required")&&!a.length&&(o=translations["Please complete this field"]),!o&&l&&a.length>l&&(o=translations.rfp_form_files_maximum_exceed),!o&&d>n&&(o=translations.rfp_form_file_exceed),o&&this.addError(r,o)}))}validateCalendarDate(){this.$form.find('.form-calendar input[type="text"]').each(((e,t)=>{let r=s()(t),a=(""+r.val()).trim(),l=null;a||(l=translations["Please select date and time"]),a.match(/^\d{4}\/\d{1,2}\/\d{1,2}\s\d{1,2}:\d{1,2}$/)||(l=translations["Please select valid date and time"]),l&&this.addError(r,l)}))}lengthInUtf8Bytes(e){let t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)}}}}]);