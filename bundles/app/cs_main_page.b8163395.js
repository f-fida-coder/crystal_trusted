"use strict";(self.webpackChunkscnsoft_website=self.webpackChunkscnsoft_website||[]).push([[8955],{49559:(e,t,a)=>{var s,l,i=a(6599),r=a(72163),c=a(5504);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}Stimulus.register("cs-main",(l=s=class extends i.Qr{constructor(){super(...arguments),h(this,"initialized",!1),h(this,"fetchDataId",0)}connect(){this.initialized=!0}handleClickTab(e){const t=e.currentTarget.dataset.tab;this.activeTabValue=this.activeTabValue===t?"":t}handleCloseDialog(){this.dialogOutlet.close(),this.activeTabValue=""}handleBackdropCloseDialog(e){e.target===this.dialogOutlet.dialogTarget&&(this.dialogOutlet.close(),this.activeTabValue="")}handleClickFilter(e){e.preventDefault(),e.stopPropagation();const t=+e.currentTarget.dataset.filterId;this.selectedFilterIdsValue.includes(t)?this.selectedFilterIdsValue=this.selectedFilterIdsValue.filter((e=>e!==t)):this.selectedFilterIdsValue=[...this.selectedFilterIdsValue,t],(0,r.L9)(this.element.dataset.trackSource,"filter",e.currentTarget.dataset.trackText,"Click")}handleClickRemoveFilterBadge(e){const t=e.currentTarget.closest(".csm-filter-badge").dataset.filterId;"search"===t?this.queryValue="":this.selectedFilterIdsValue=this.selectedFilterIdsValue.filter((e=>e!==+t)),(0,r.L9)(this.element.dataset.trackSource,"filter",e.currentTarget.closest(".csm-filter-badge").innerText,"Delete")}handleClickClearAllFilterBadges(){this.selectedFilterIdsValue=[],this.queryValue=""}handleClickShowMoreBtn(){this.pageValue++,this.showMoreBtnTarget.classList.add("disabled"),this.fetchData().then((()=>{this.scrollForMoreCSValue=!0,this.showMoreBtnTarget.classList.remove("disabled")}))}handleClickClearSearch(){this.queryValue="",this.searchInputTarget.value=""}handleSearch(){this.queryValue=this.searchInputTarget.value}handleAppearMoreCSBtn(){this.scrollForMoreCSValue&&(this.scrollForMoreCSValue=!1,this.pageValue++,this.fetchData().then((()=>this.scrollForMoreCSValue=!0)))}handleClickCaseyStudy(e){const t=e.currentTarget.querySelector(".csm-item-link");e.target!==t&&(e.preventDefault(),t.click())}handleClickFilterItemsBtn(){(0,c.Z)(this.searchInputTarget,600)}handleCloseFilters(){this.activeTabValue=""}activeTabValueChanged(){const e=window.matchMedia("(max-width: 767px)").matches;this.tabButtonTargets.forEach((e=>e.classList.toggle("active",this.activeTabValue===e.dataset.tab))),this.tabFiltersTargets.forEach((t=>{const a=this.activeTabValue===t.dataset.tab;t.classList.toggle("active",a),e&&a&&(this.dialogTitleTarget.innerHTML=t.dataset.tabTitle,this.dialogBodyTarget.innerHTML=t.outerHTML,this.dialogOutlet.open())}))}selectedFilterIdsValueChanged(e){this.filterTargets.forEach((t=>{const a=e.includes(+t.dataset.filterId);t.classList.toggle("active",a),t.querySelector('input[type="checkbox"]').toggleAttribute("checked",a),t.querySelector('input[type="checkbox"]').checked=a})),this.tabButtonTargets.forEach((e=>{const t=null!==this.element.querySelector(`[data-tab="${e.dataset.tab}"] .csm-filter.active`);e.classList.toggle("has-selected-filters",t)})),this.syncBadgeFilters(),this.initialized&&(this.pageValue=1,this.element.classList.add("loading"),this.fetchData().then((()=>this.element.classList.remove("loading"))))}availableFilterIdsValueChanged(e){this.filterTargets.forEach((t=>{const a=e.includes(+t.dataset.filterId);t.classList.toggle("disabled",!a)}))}queryValueChanged(e){this.initialized&&(this.searchInputTarget.value=e,this.syncBadgeFilters(),this.pageValue=1,this.element.classList.add("loading"),this.fetchData().then((()=>this.element.classList.remove("loading"))))}pageValueChanged(e){1===e&&(this.scrollForMoreCSValue=!1)}syncBadgeFilters(){this.filterBadgeTargets.forEach((e=>e.remove())),this.selectedFilterIdsValue.forEach((e=>{const t=this.filterTargets.filter((t=>e===+t.dataset.filterId))[0];if(t){const a=t.querySelector(".csm-filter-name").innerText.trim();this.addBadgeFilter(e,a)}})),this.queryValue&&this.addBadgeFilter("search",this.queryValue),this.appliedFiltersTarget.classList.contains("active")||(this.totalTarget.innerHTML=""),this.appliedFiltersTarget.classList.toggle("active",this.selectedFilterIdsValue.length>0||this.queryValue)}addBadgeFilter(e,t){const a=this.filterBadgeTemplateTarget,s=a.content.cloneNode(!0);s.querySelector(".csm-filter-badge").dataset.filterId=e,s.querySelector(".csm-filter-badge-name").innerText=t,a.parentNode.insertBefore(s,a)}async fetchData(){const e=++this.fetchDataId,t={};this.tabFiltersTargets.forEach((e=>{const a=e.dataset.tab,s=e.querySelectorAll(".csm-filter.active");t[a]=[...s].map((e=>+e.dataset.filterId)).join("_")}));const a=new URLSearchParams(o(o({},t),{},{ajax:"1",page:this.pageValue,perPage:this.perPageValue,query:this.queryValue})),s=await fetch(`${this.getFetchUrl()}?${a.toString()}`),l=await s.json();var i;e===this.fetchDataId&&(1===this.pageValue?this.itemsTarget.innerHTML=l.itemsHtml:this.itemsTarget.insertAdjacentHTML("beforeend",l.itemsHtml),this.totalTarget.innerText=l.total,this.showMoreBtnTarget.classList.toggle("hidden",this.pageValue*this.perPageValue>=l.total),this.element.classList.toggle("no-results",0==+l.total),this.availableFilterIdsValue=l.availableFilterIds,editmode||1!==this.pageValue||(null===(i=this.element.querySelector(".csm-description"))||void 0===i||i.remove(),history.replaceState({},null,l.currentUrl)))}getFetchUrl(){const e=[],t=[];return this.selectedFilterIdsValue.forEach((a=>{var s;const l=this.element.querySelector(`.csm-filter[data-filter-id="${a}"]`),i=null==l||null===(s=l.closest("[data-tab]"))||void 0===s?void 0:s.dataset.tab,r=null==l?void 0:l.dataset.filterUrl;r&&!t.includes(i)&&t.length<2&&(e.push("/"+r),t.push(i))})),this.urlValue+e.sort().join("")}},h(s,"outlets",["dialog"]),h(s,"targets",["searchInput","tabButton","tabFilters","filter","appliedFilters","total","filterBadgeTemplate","filterBadge","items","showMoreBtn","dialogBody","dialogTitle"]),h(s,"values",{url:String,page:Number,perPage:Number,activeTab:String,selectedFilterIds:Array,availableFilterIds:Array,scrollForMoreCS:Boolean,query:String}),l))}},e=>{e.O(0,[3913,6599,2163,5504],(()=>{return t=49559,e(e.s=t);var t}));e.O()}]);